{"version":3,"file":"telemetry.js","sourceRoot":"","sources":["../../../../preprocess-dist/acs-ui-common/src/telemetry.ts"],"names":[],"mappings":"AAAA,uCAAuC;AACvC,kCAAkC;AAElC,OAAO,KAAK,gBAAgB,MAAM,oBAAoB,CAAC;AAEvD;;GAEG;AACH,qFAAqF;AACrF,gEAAgE;AAChE,MAAM,CAAC,MAAM,QAAQ,GAAG,CAAC,OAAe,EAAU,EAAE;IAClD,MAAM,UAAU,GAAG,OAAO,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC;IAC3C,IAAI,UAAU,IAAI,CAAC,EAAE;QACnB,OAAO,OAAO,CAAC,SAAS,CAAC,CAAC,EAAE,UAAU,GAAG,CAAC,CAAC,CAAC;KAC7C;IACD,OAAO,OAAO,CAAC;AACjB,CAAC,CAAC;AAEF;;;;;;;;;;;;;;GAcG;AACH,MAAM,CAAC,MAAM,iBAAiB,GAAG,GAAW,EAAE;IAC5C,MAAM,OAAO,GAAG,gBAAgB,CAAC,SAAS,CAAC,CAAC;IAC5C,OAAO,QAAQ,CAAC,OAAO,OAAO,EAAE,CAAC,CAAC;AACpC,CAAC,CAAC","sourcesContent":["// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT license.\n\nimport * as telemetryVersion from './telemetryVersion';\n\n/**\n * @private\n */\n// Removes long suffixes that don't fit the constraints for telemetry application ID.\n// e.g., the build suffix is dropped for alpha package versions.\nexport const sanitize = (version: string): string => {\n  const alphaIndex = version.search(/alpha/);\n  if (alphaIndex >= 0) {\n    return version.substring(0, alphaIndex + 5);\n  }\n  return version;\n};\n\n/**\n * Application ID to be included in telemetry data from the UI library.\n * Template: acXYYY/<version>\n * Where:\n * - X describes a platform, [r: web, i: iOS, a: Android]\n * - YYY describes what's running on this platform (optional, currently unused by this library):\n *    Y[0] is high-level artifact,\n *      [0: undefined, 1: AzureCommunicationLibrary, 2: ACS SampleApp]\n *    Y[1] is specific implementation,\n *      [0: undefined, 1: Call Composite, 2: Chat Composite, 3: CallWithChatComposite, 4: UI Components]\n *    Y[2] is reserved for implementation details,\n *      [0: undefined]\n *\n * @internal\n */\nexport const _getApplicationId = (): string => {\n  const version = telemetryVersion['default'];\n  return sanitize(`acr/${version}`);\n};"]}