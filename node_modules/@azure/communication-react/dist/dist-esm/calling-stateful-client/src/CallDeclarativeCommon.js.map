{"version":3,"file":"CallDeclarativeCommon.js","sourceRoot":"","sources":["../../../../preprocess-dist/calling-stateful-client/src/CallDeclarativeCommon.ts"],"names":[],"mappings":"AAAA,uCAAuC;AACvC,kCAAkC;;;;;;;;;;AAKlC;;GAEG;AACH,MAAM,OAAgB,eAAe;IAEnC,YAAY,OAAoB;QAC9B,IAAI,CAAC,QAAQ,GAAG,OAAO,CAAC;IAC1B,CAAC;IACM,WAAW;QAChB,6EAA6E;IAC/E,CAAC;IACS,UAAU;QAClB,OAAO,IAAI,CAAC,QAAQ,CAAC;IACvB,CAAC;IACM,GAAG,CAA6B,MAAkB,EAAE,IAAO;QAChE,QAAQ,IAAI,EAAE;YACZ,KAAK,MAAM;gBACT;oBACE,OAAO,IAAI,CAAC,QAAQ,CAAC,yBAAyB,CAAC,UAAgB,GAAG,IAAoC;;4BACpG,OAAO,MAAM,MAAM,CAAC,IAAI,CAAC,GAAG,IAAI,CAAC,CAAC;wBACpC,CAAC;qBAAA,EAAE,WAAW,CAAC,CAAC;iBACjB;YACH,KAAK,QAAQ;gBACX;oBACE,OAAO,IAAI,CAAC,QAAQ,CAAC,yBAAyB,CAAC,UAAgB,GAAG,IAAsC;;4BACtG,OAAO,MAAM,MAAM,CAAC,MAAM,CAAC,GAAG,IAAI,CAAC,CAAC;wBACtC,CAAC;qBAAA,EAAE,aAAa,CAAC,CAAC;iBACnB;YACH,KAAK,YAAY;gBACf;oBACE,OAAO,IAAI,CAAC,QAAQ,CAAC,yBAAyB,CAAC,UAAgB,GAAG,IAA0C;;4BAC1G,OAAO,MAAM,MAAM,CAAC,UAAU,CAAC,GAAG,IAAI,CAAC,CAAC;wBAC1C,CAAC;qBAAA,EAAE,iBAAiB,CAAC,CAAC;iBACvB;YACH,KAAK,WAAW;gBACd;oBACE,OAAO,IAAI,CAAC,QAAQ,CAAC,yBAAyB,CAAC,UAAgB,GAAG,IAAyC;;4BACzG,OAAO,MAAM,MAAM,CAAC,SAAS,CAAC,GAAG,IAAI,CAAC,CAAC;wBACzC,CAAC;qBAAA,EAAE,gBAAgB,CAAC,CAAC;iBACtB;YACH,KAAK,oBAAoB;gBACvB;oBACE,OAAO,IAAI,CAAC,QAAQ,CAAC,yBAAyB,CAAC,UAAgB,GAAG,IAAkD;;4BAClH,OAAO,MAAM,MAAM,CAAC,kBAAkB,CAAC,GAAG,IAAI,CAAC,CAAC;wBAClD,CAAC;qBAAA,EAAE,yBAAyB,CAAC,CAAC;iBAC/B;YACH,KAAK,mBAAmB;gBACtB;oBACE,OAAO,IAAI,CAAC,QAAQ,CAAC,yBAAyB,CAAC,UAAgB,GAAG,IAAiD;;4BACjH,OAAO,MAAM,MAAM,CAAC,iBAAiB,CAAC,GAAG,IAAI,CAAC,CAAC;wBACjD,CAAC;qBAAA,EAAE,wBAAwB,CAAC,CAAC;iBAC9B;YACH,KAAK,MAAM;gBACT;oBACE,OAAO,IAAI,CAAC,QAAQ,CAAC,yBAAyB,CAAC,UAAgB,GAAG,IAAoC;;4BACpG,OAAO,MAAM,MAAM,CAAC,IAAI,CAAC,GAAG,IAAI,CAAC,CAAC;wBACpC,CAAC;qBAAA,EAAE,WAAW,CAAC,CAAC;iBACjB;YACH,KAAK,QAAQ;gBACX;oBACE,OAAO,IAAI,CAAC,QAAQ,CAAC,yBAAyB,CAAC,UAAgB,GAAG,IAAsC;;4BACtG,OAAO,MAAM,MAAM,CAAC,MAAM,CAAC,GAAG,IAAI,CAAC,CAAC;wBACtC,CAAC;qBAAA,EAAE,aAAa,CAAC,CAAC;iBACnB;YACH;gBACE,OAAO,OAAO,CAAC,GAAG,CAAC,MAAM,EAAE,IAAI,CAAC,CAAC;SACpC;IACH,CAAC;CACF","sourcesContent":["// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT license.\n\nimport { CallContext } from './CallContext';\nimport { CallCommon } from './BetaToStableTypes';\n\n/**\n * @private\n */\nexport abstract class ProxyCallCommon implements ProxyHandler<CallCommon> {\n  private _context: CallContext;\n  constructor(context: CallContext) {\n    this._context = context;\n  }\n  public unsubscribe(): void {\n    /** No subscriptions yet. But there will be one for transfer feature soon. */\n  }\n  protected getContext(): CallContext {\n    return this._context;\n  }\n  public get<P extends keyof CallCommon>(target: CallCommon, prop: P): any {\n    switch (prop) {\n      case 'mute':\n        {\n          return this._context.withAsyncErrorTeedToState(async function (...args: Parameters<CallCommon['mute']>) {\n            return await target.mute(...args);\n          }, 'Call.mute');\n        }\n      case 'unmute':\n        {\n          return this._context.withAsyncErrorTeedToState(async function (...args: Parameters<CallCommon['unmute']>) {\n            return await target.unmute(...args);\n          }, 'Call.unmute');\n        }\n      case 'startVideo':\n        {\n          return this._context.withAsyncErrorTeedToState(async function (...args: Parameters<CallCommon['startVideo']>) {\n            return await target.startVideo(...args);\n          }, 'Call.startVideo');\n        }\n      case 'stopVideo':\n        {\n          return this._context.withAsyncErrorTeedToState(async function (...args: Parameters<CallCommon['stopVideo']>) {\n            return await target.stopVideo(...args);\n          }, 'Call.stopVideo');\n        }\n      case 'startScreenSharing':\n        {\n          return this._context.withAsyncErrorTeedToState(async function (...args: Parameters<CallCommon['startScreenSharing']>) {\n            return await target.startScreenSharing(...args);\n          }, 'Call.startScreenSharing');\n        }\n      case 'stopScreenSharing':\n        {\n          return this._context.withAsyncErrorTeedToState(async function (...args: Parameters<CallCommon['stopScreenSharing']>) {\n            return await target.stopScreenSharing(...args);\n          }, 'Call.stopScreenSharing');\n        }\n      case 'hold':\n        {\n          return this._context.withAsyncErrorTeedToState(async function (...args: Parameters<CallCommon['hold']>) {\n            return await target.hold(...args);\n          }, 'Call.hold');\n        }\n      case 'resume':\n        {\n          return this._context.withAsyncErrorTeedToState(async function (...args: Parameters<CallCommon['resume']>) {\n            return await target.resume(...args);\n          }, 'Call.resume');\n        }\n      default:\n        return Reflect.get(target, prop);\n    }\n  }\n}"]}