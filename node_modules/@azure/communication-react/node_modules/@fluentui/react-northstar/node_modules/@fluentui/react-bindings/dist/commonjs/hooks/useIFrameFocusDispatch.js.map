{"version":3,"sources":["hooks/useIFrameFocusDispatch.ts"],"names":["FUI_FRAME_EVENT","useIFrameFocusDispatch","enableFrameFocusDispatch","targetDocument","pollDuration","timeoutRef","React","useRef","useEffect","current","defaultView","setInterval","activeElement","tagName","event","CustomEvent","bubbles","dispatchEvent","clearTimeout"],"mappings":";;;;;AAAA;;;;;;AAEO,IAAMA,eAAe,GAAG,eAAxB;AAEP;AACA;AACA;;;;AACO,IAAMC,sBAAsB,GAAG,SAAzBA,sBAAyB,CACpCC,wBADoC,EAEpCC,cAFoC,EAGpCC,YAHoC,EAIjC;AAAA,MADHA,YACG;AADHA,IAAAA,YACG,GADoB,IACpB;AAAA;;AACH,MAAMC,UAAU,GAAGC,KAAK,CAACC,MAAN,EAAnB;AAEAD,EAAAA,KAAK,CAACE,SAAN,CAAgB,YAAM;AACpB,QAAIN,wBAAJ,EAA8B;AAAA;;AAC5BG,MAAAA,UAAU,CAACI,OAAX,GAAqBN,cAArB,6CAAqBA,cAAc,CAAEO,WAArC,qBAAqB,sBAA6BC,WAA7B,CAAyC,YAAM;AAClE,YAAMC,aAAa,GAAGT,cAAH,oBAAGA,cAAc,CAAES,aAAtC;;AACA,YAAI,CAAAA,aAAa,QAAb,YAAAA,aAAa,CAAEC,OAAf,MAA2B,QAA/B,EAAyC;AACvC,cAAMC,KAAK,GAAG,IAAIC,WAAJ,CAAgBf,eAAhB,EAAiC;AAAEgB,YAAAA,OAAO,EAAE;AAAX,WAAjC,CAAd;AACAJ,UAAAA,aAAa,CAACK,aAAd,CAA4BH,KAA5B;AACD;AACF,OANoB,EAMlBV,YANkB,CAArB;AAOD;;AACD,WAAO,YAAM;AAAA;;AACXD,MAAAA,cAAc,QAAd,sCAAAA,cAAc,CAAEO,WAAhB,4CAA6BQ,YAA7B,CAA0Cb,UAAU,CAACI,OAArD;AACD,KAFD;AAGD,GAbD,EAaG,CAACN,cAAD,EAAiBD,wBAAjB,EAA2CE,YAA3C,CAbH;AAcD,CArBM","sourcesContent":["import * as React from 'react';\n\nexport const FUI_FRAME_EVENT = 'fuiframefocus';\n\n/**\n * Watch the `document.activeElement` and dispatch a custom event if the current active element is a iframe.\n */\nexport const useIFrameFocusDispatch = (\n  enableFrameFocusDispatch: boolean,\n  targetDocument: Document,\n  pollDuration: number = 1000,\n) => {\n  const timeoutRef = React.useRef<number>();\n\n  React.useEffect(() => {\n    if (enableFrameFocusDispatch) {\n      timeoutRef.current = targetDocument?.defaultView?.setInterval(() => {\n        const activeElement = targetDocument?.activeElement;\n        if (activeElement?.tagName === 'IFRAME') {\n          const event = new CustomEvent(FUI_FRAME_EVENT, { bubbles: true });\n          activeElement.dispatchEvent(event);\n        }\n      }, pollDuration);\n    }\n    return () => {\n      targetDocument?.defaultView?.clearTimeout(timeoutRef.current);\n    };\n  }, [targetDocument, enableFrameFocusDispatch, pollDuration]);\n};\n"],"file":"useIFrameFocusDispatch.js"}