"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.useIFrameFocusDispatch = exports.FUI_FRAME_EVENT = void 0;
var React = require("react");
exports.FUI_FRAME_EVENT = 'fuiframefocus';
/**
 * Watch the `document.activeElement` and dispatch a custom event if the current active element is a iframe.
 */
var useIFrameFocusDispatch = function (enableFrameFocusDispatch, targetDocument, pollDuration) {
    if (pollDuration === void 0) { pollDuration = 1000; }
    var timeoutRef = React.useRef();
    React.useEffect(function () {
        var _a;
        if (enableFrameFocusDispatch) {
            timeoutRef.current = (_a = targetDocument === null || targetDocument === void 0 ? void 0 : targetDocument.defaultView) === null || _a === void 0 ? void 0 : _a.setInterval(function () {
                var activeElement = targetDocument === null || targetDocument === void 0 ? void 0 : targetDocument.activeElement;
                if ((activeElement === null || activeElement === void 0 ? void 0 : activeElement.tagName) === 'IFRAME') {
                    var event_1 = new CustomEvent(exports.FUI_FRAME_EVENT, { bubbles: true });
                    activeElement.dispatchEvent(event_1);
                }
            }, pollDuration);
        }
        return function () {
            var _a;
            (_a = targetDocument === null || targetDocument === void 0 ? void 0 : targetDocument.defaultView) === null || _a === void 0 ? void 0 : _a.clearTimeout(timeoutRef.current);
        };
    }, [targetDocument, enableFrameFocusDispatch, pollDuration]);
};
exports.useIFrameFocusDispatch = useIFrameFocusDispatch;
