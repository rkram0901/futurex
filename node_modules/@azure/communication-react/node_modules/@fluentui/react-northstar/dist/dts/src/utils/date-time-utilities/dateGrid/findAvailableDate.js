"use strict";
var __rest = (this && this.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.findAvailableDate = void 0;
var isRestrictedDate_1 = require("./isRestrictedDate");
var isAfterMaxDate_1 = require("./isAfterMaxDate");
var isBeforeMinDate_1 = require("./isBeforeMinDate");
var dateMath_1 = require("../dateMath/dateMath");
/**
 * Returns closest available date given the restriction `options`, or undefined otherwise
 * @param options - list of search options
 */
var findAvailableDate = function (options) {
    var targetDate = options.targetDate, initialDate = options.initialDate, direction = options.direction, restrictedDateOptions = __rest(options, ["targetDate", "initialDate", "direction"]);
    var availableDate = targetDate;
    // if the target date is available, return it immediately
    if (!isRestrictedDate_1.isRestrictedDate(targetDate, restrictedDateOptions)) {
        return targetDate;
    }
    while (dateMath_1.compareDatePart(initialDate, availableDate) !== 0 &&
        isRestrictedDate_1.isRestrictedDate(availableDate, restrictedDateOptions) &&
        !isAfterMaxDate_1.isAfterMaxDate(availableDate, restrictedDateOptions) &&
        !isBeforeMinDate_1.isBeforeMinDate(availableDate, restrictedDateOptions)) {
        availableDate = dateMath_1.addDays(availableDate, direction);
    }
    if (dateMath_1.compareDatePart(initialDate, availableDate) !== 0 && !isRestrictedDate_1.isRestrictedDate(availableDate, restrictedDateOptions)) {
        return availableDate;
    }
    return undefined;
};
exports.findAvailableDate = findAvailableDate;
