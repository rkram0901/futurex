{"version":3,"sources":["components/List/List.tsx"],"names":["listBehavior","getElementType","useUnhandledProps","useAccessibility","useAutoControlled","useFluentContext","useStyles","useTelemetry","customPropTypes","PropTypes","React","childrenExist","commonPropTypes","rtlTextContainer","createShorthandFactory","ListContextProvider","ListItem","ListItemContent","ListItemContentMedia","ListItemEndMedia","ListItemHeader","ListItemHeaderMedia","ListItemMedia","listClassName","List","forwardRef","props","ref","context","displayName","telemetry","setStart","setEnd","accessibility","as","children","className","debug","design","horizontal","items","navigable","selectable","styles","truncateContent","truncateHeader","variables","wrap","defaultValue","defaultSelectedIndex","value","selectedIndex","initialValue","setSelectedIndex","getA11Props","debugName","mapPropsToBehavior","rtl","mapPropsToStyles","isListTag","mapPropsToInlineStyles","classes","latestProps","useRef","current","ElementType","unhandledProps","handledProps","hasContent","length","onItemClick","useCallback","e","itemIndex","childProps","renderItems","item","index","create","defaultProps","element","unstable_wrapWithFocusZone","root","getAttributes","forElements","propTypes","createCommon","content","bool","collectionShorthand","every","disallow","number","onSelectedIndexChange","func","Object","keys","Item","ItemContent","ItemContentMedia","ItemEndMedia","ItemHeader","ItemHeaderMedia","ItemMedia","Component","mappedArrayProp"],"mappings":"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","sourcesContent":["import { Accessibility, listBehavior, ListBehaviorProps } from '@fluentui/accessibility';\nimport {\n  getElementType,\n  useUnhandledProps,\n  useAccessibility,\n  useAutoControlled,\n  useFluentContext,\n  useStyles,\n  useTelemetry,\n  ForwardRefWithAs,\n} from '@fluentui/react-bindings';\nimport * as customPropTypes from '@fluentui/react-proptypes';\nimport * as _ from 'lodash';\nimport * as PropTypes from 'prop-types';\nimport * as React from 'react';\n\nimport { ComponentEventHandler, ShorthandCollection, ReactChildren, FluentComponentStaticProps } from '../../types';\nimport {\n  childrenExist,\n  UIComponentProps,\n  ChildrenComponentProps,\n  commonPropTypes,\n  rtlTextContainer,\n  createShorthandFactory,\n} from '../../utils';\nimport { ListContextProvider, ListContextValue } from './listContext';\nimport { ListItem, ListItemProps } from './ListItem';\nimport { ListItemContent } from './ListItemContent';\nimport { ListItemContentMedia } from './ListItemContentMedia';\nimport { ListItemEndMedia } from './ListItemEndMedia';\nimport { ListItemHeader } from './ListItemHeader';\nimport { ListItemHeaderMedia } from './ListItemHeaderMedia';\nimport { ListItemMedia } from './ListItemMedia';\n\nexport interface ListProps extends UIComponentProps, ChildrenComponentProps {\n  /** Accessibility behavior if overridden by the user. */\n  accessibility?: Accessibility<ListBehaviorProps>;\n\n  /** Toggle debug mode */\n  debug?: boolean;\n\n  /** Shorthand array of props for ListItem. */\n  items?: ShorthandCollection<ListItemProps>;\n\n  /** A selectable list formats list items as possible choices. */\n  selectable?: boolean;\n\n  /** A navigable list allows user to navigate through items. */\n  navigable?: boolean;\n\n  /** Index of the currently selected item. */\n  selectedIndex?: number;\n\n  /** Initial selectedIndex value. */\n  defaultSelectedIndex?: number;\n\n  /**\n   * Event for request to change 'selectedIndex' value.\n   * @param event - React's original SyntheticEvent.\n   * @param data - All props and proposed value.\n   */\n  onSelectedIndexChange?: ComponentEventHandler<ListProps>;\n\n  /** Truncates content */\n  truncateContent?: boolean;\n\n  /** Truncates header */\n  truncateHeader?: boolean;\n\n  /** A horizontal list displays elements horizontally. */\n  horizontal?: boolean;\n\n  /** An optional wrapper function. */\n  wrap?: (children: ReactChildren) => React.ReactNode;\n}\n\nexport type ListStylesProps = Pick<ListProps, 'debug' | 'horizontal'> & { isListTag: boolean };\nexport const listClassName = 'ui-list';\n\n/**\n * A List displays a group of related sequential items.\n *\n * @accessibility\n * List may follow one of the following accessibility semantics:\n * - Static non-navigable list. Implements [ARIA list](https://www.w3.org/TR/wai-aria-1.1/#list) role.\n * - Selectable list: allows the user to select item from a list of choices. Implements [ARIA Listbox](https://www.w3.org/TR/wai-aria-practices-1.1/#Listbox) design pattern.\n * @accessibilityIssues\n * [NVDA - Browse Mode does not work with listbox #12350](https://github.com/nvaccess/nvda/issues/12350)\n * [JAWS - Listbox options are not reachable in Virtual Cursor PC mode #517](https://github.com/FreedomScientific/VFO-standards-support/issues/517)\n * [JAWS - Aria-selected is not narrated for the single-select listbox, when selection is NOT moved with focus #440](https://github.com/FreedomScientific/VFO-standards-support/issues/440)\n */\nexport const List = (React.forwardRef<HTMLUListElement, ListProps & { as: React.ReactNode }>((props, ref) => {\n  const context = useFluentContext();\n  const { setStart, setEnd } = useTelemetry(List.displayName, context.telemetry);\n  setStart();\n\n  const {\n    accessibility,\n    as,\n    children,\n    className,\n    debug,\n    design,\n    horizontal,\n    items,\n    navigable,\n    selectable,\n    styles,\n    truncateContent,\n    truncateHeader,\n    variables,\n    wrap,\n  } = props;\n\n  const [selectedIndex, setSelectedIndex] = useAutoControlled({\n    defaultValue: props.defaultSelectedIndex,\n    value: props.selectedIndex,\n    initialValue: -1,\n  });\n  const getA11Props = useAccessibility(accessibility, {\n    debugName: List.displayName,\n    mapPropsToBehavior: () => ({\n      horizontal,\n      navigable,\n      selectable,\n    }),\n    rtl: context.rtl,\n  });\n  const { classes } = useStyles<ListStylesProps>(List.displayName, {\n    className: listClassName,\n    mapPropsToStyles: () => ({ isListTag: as === 'ol' || as === 'ul', debug, horizontal }),\n    mapPropsToInlineStyles: () => ({ className, design, styles, variables }),\n    rtl: context.rtl,\n  });\n\n  const latestProps = React.useRef<ListProps>(props);\n  latestProps.current = props;\n\n  const ElementType = getElementType(props);\n  const unhandledProps = useUnhandledProps(List.handledProps, props);\n\n  const hasContent = childrenExist(children) || (items && items.length > 0);\n  const onItemClick = React.useCallback(\n    (e, itemIndex) => {\n      if (latestProps.current.selectable) {\n        setSelectedIndex(itemIndex);\n        _.invoke(latestProps.current, 'onSelectedIndexChange', e, {\n          ...latestProps.current,\n          selectedIndex: itemIndex,\n        });\n      }\n    },\n    [latestProps, setSelectedIndex],\n  );\n\n  const childProps: ListContextValue = {\n    debug,\n    navigable,\n    onItemClick,\n    selectable,\n    selectedIndex,\n    truncateContent,\n    truncateHeader,\n    variables,\n  };\n  const renderItems = () => _.map(items, (item, index) => ListItem.create(item, { defaultProps: () => ({ index }) }));\n\n  const element = getA11Props.unstable_wrapWithFocusZone(\n    <ElementType\n      {...getA11Props('root', {\n        className: classes.root,\n        ref,\n        ...rtlTextContainer.getAttributes({ forElements: [children] }),\n        ...unhandledProps,\n      })}\n    >\n      <ListContextProvider value={childProps}>\n        {hasContent && wrap(childrenExist(children) ? children : renderItems())}\n      </ListContextProvider>\n    </ElementType>,\n  );\n  setEnd();\n\n  return element;\n}) as unknown) as ForwardRefWithAs<'ul', HTMLUListElement, ListProps> &\n  FluentComponentStaticProps<ListProps> & {\n    Item: typeof ListItem;\n    ItemContent: typeof ListItemContent;\n    ItemContentMedia: typeof ListItemContentMedia;\n    ItemEndMedia: typeof ListItemEndMedia;\n    ItemHeader: typeof ListItemHeader;\n    ItemHeaderMedia: typeof ListItemHeaderMedia;\n    ItemMedia: typeof ListItemMedia;\n  };\n\nList.displayName = 'List';\n\nList.defaultProps = {\n  as: 'ul',\n  accessibility: listBehavior,\n  wrap: children => children,\n};\nList.propTypes = {\n  ...commonPropTypes.createCommon({\n    content: false,\n  }),\n  debug: PropTypes.bool,\n  items: customPropTypes.collectionShorthand,\n  selectable: customPropTypes.every([customPropTypes.disallow(['navigable']), PropTypes.bool]),\n  navigable: customPropTypes.every([customPropTypes.disallow(['selectable']), PropTypes.bool]),\n  truncateContent: PropTypes.bool,\n  truncateHeader: PropTypes.bool,\n  selectedIndex: PropTypes.number,\n  defaultSelectedIndex: PropTypes.number,\n  onSelectedIndexChange: PropTypes.func,\n  horizontal: PropTypes.bool,\n  wrap: PropTypes.func,\n};\n\nList.handledProps = Object.keys(List.propTypes) as any;\nList.Item = ListItem;\nList.ItemContent = ListItemContent;\nList.ItemContentMedia = ListItemContentMedia;\nList.ItemEndMedia = ListItemEndMedia;\nList.ItemHeader = ListItemHeader;\nList.ItemHeaderMedia = ListItemHeaderMedia;\nList.ItemMedia = ListItemMedia;\n\nList.create = createShorthandFactory({ Component: List, mappedArrayProp: 'items' });\n"],"file":"List.js"}